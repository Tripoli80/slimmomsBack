{
    "openapi": "3.0.1",
    "info": {
        "version": "1.0.1",
        "title": "SlimMom API Docs",
        "description": "Endpoints for front-end",
        "license": {
            "name": "MIT"
        }
    },
    "consumes": ["application/json"],
    "produces": ["application/json"],
    "servers":[
        {
            "url": "http://localhost:3008/", 
            "description": "Local server"
            },
            {
            "url": "https://creepy-tan-parrot.cyclic.app/", 
            "description": "Main server"
            }
        ],
    "tags": [
        {
            "name": "Auth",
            "description": "Authentification user's"
        },
        {
            "name": "Products",
            "description": "List of products for user"
        },
         {
            "name": "Diet",
            "description": "Diet for user"
        }
    ],
    "paths": {
        "/api/users/signup": {
            "post": {
                "tags": ["Auth"],
                "summary": "User registration",
                "parameters": [],
                "requestBody": {
                    "description": "Regitrations object",
                    "required": true,
                    "content": {
                        "application/json" : {
                            "schema" :{
                                    "$ref": "#/components/schemas/RegistrationsRequest"
                            }
                        }
                    }
                },
                "responses" : {
                    "201" : {
                        "description": "Succesfully created",
                        "content" : {
                             "application/json" : {
                             "schema" :{
                                    "$ref": "#/components/schemas/RegistrationsResponse"
                             }
                        }
                        }
                    },
                    "400" : {
                        "description": "Bad request",
                        "content" : {}
                    },
                    "409" : {
                        "description": "Provided email alredy esixts",
                        "content" : {}
                    }
                }
            }
        },
        "/api/users/login": {
            "post": {
                "tags": ["Auth"],
                "produces": [
          "application/json"
        ],
                "summary": "User login",
                "parameters": [],
                "requestBody": {
                    "description": "Login object",
                    "required": true,
                    "content": {
                        "application/json" : {
                            "schema" :{
                                    "$ref": "#/components/schemas/LoginRequest"
                            }
                        }
                    }
                },
                "responses" : {
                    "200" : {
                        "description": "Ok",
                        "content" : {
                             "application/json" : {
                             "schema" :{
                                    "$ref": "#/components/schemas/LoginResponse"
                             }
                        }
                        }
                    },
                    "401" : {
                        "description": "Unauthorized",
                        "content" : {}
                    },
                    "404" : {
                        "description": "User not found",
                        "content" : {}
                    }
                }
            }
        },
        "/api/users/logout": {
            "get": {
                "tags": ["Auth"],
                "summary": "User logout",
                "parameters": [],
                "security": [{"Bearer":[]}],
                "responses" : {
                    "204" : {
                        "description": "Succesfull",
                        "content" : {}
                    },
                    "401" : {
                        "description": "Unauthorized",
                        "content" : {}
                    },
                     "404": {
            "description": "Invalid user / Invalid session",
            "content": {}
          }
                }
            }
        },
        "/api/users/current": {
            "get": {
                "tags": ["Auth"],
                "summary": "Update user subscription ",
                "parameters": [],
                "security": [{"Bearer":[]}],
                "responses" : {
                    "200" : {
                        "description": "Succesfull",
                        "content" : {
                            "application/json" : {
                            "schema" :{
                                    "$ref": "#/components/schemas/CurrentResponse"
                            }
                        }
                        }
                    },
                    "401" : {
                        "description": "Unauthorized",
                        "content" : {}
                    },
                         "404": {
            "description": "Not Found",
            "content": {}
          }          
                }
            }
        },
        "/api/products/": {
            "get": {
                "tags": ["Products"],
                "summary": "All products",
                "parameters": [],
                "responses" : {
                    "200" : {
                        "description": "List of all products",
                        "content" : {
                            "application/json" : {
                            "schema" :{
                                    "$ref": "#/components/schemas/AllProductsResponse"
                            }
                        }
                        }
                    },
                         "404": {
            "description": "Not Found",
            "content": {}
          }          
                }
            }
        },
        "/api/diet/": {
            "post": {
                "tags": ["Diet"],
                "summary": "Diet",
                "parameters": [],
                "requestBody": {
                 "description": "User body params",
                 "required": true,
                 "content" :{
                    "application/json" : {
                             "schema" :{
                                    "$ref": "#/components/schemas/DietRequest"
                             }
                        }
                 }
                },
                "responses" : {
                    "200" : {
                        "description": "Succesfull",
                        "content" : {
                            "application/json" : {
                            "schema" :{
                                    "$ref": "#/components/schemas/DietResponse"
                            }
                        }
                        }
                    },
                         "400": {
            "description": "Bad Request",
            "content": {}
          }          
                }
            }
        }
    },
    "components": {
        "schemas" :{
            "RegistrationsRequest" : {
                "type": "object",
                "required": ["email", "name", "password"],
                "properties" : {
                "email" : {
                    "type": "string",
                    "description" : "User email",
                    "format": "email"
                },
                "password" : {
                    "type": "string",
                    "description" : "User password",
                    "example": "password123"
                },
                "username" : {
                    "type": "string",
                    "description" : "User name",
                    "example": "John Dou"
                }
            }
            },
            "RegistrationsResponse" : {
                "type": "object",
                  "properties" : {
                    "email" : {
                        "type": "string",
                        "description" : "User email",
                        "format": "email"
                },
                    "username" : {
                        "type": "string",
                        "description" : "User name",
                        "example": "John Dou"
                },
                 "verificationToken" : {
                    "type": "string",
                    "description" : "verificationToken",
                    "example": "dfktunktuvd"
                }
            }
            },
             "LoginRequest" : {
                "type": "object",
                "required": ["email", "password"],
                "properties" : {
                "email" : {
                    "type": "string",
                    "description" : "User email",
                    "format": "email"
                },
                "password" : {
                    "type": "string",
                    "description" : "User password",
                    "example": "password123"
                }
            }
            },
             "LoginResponse" : {
                "type": "object",
                "required": ["email", "token"],
                "properties" : {
                     "token" : {
                    "type": "string",
                    "description" : "Token",
                    "example": "some.Token.123"
                },
                "user" :{
                    "type": "object",
                    "properties": {
                        "email": {
                            "type": "string",
                            "format":"email"
                        }
                    }
                }
            }
            },         
             "CurrentResponse" : {
             "type": "object",
                "required": ["email","username"],
                "properties" : {
                 "username" : {
                    "type": "string",
                    "description" : "username",
                    "example": "someUser123"
                },
                "email" : {
                    "type": "string",
                    "description" : "User email",
                    "format": "email"
                }
            }
            },
             "AllProductsResponse" : {
             "type": "array",
             "items": {
                "type": "object",
                "properties": {
                "title": {
                "type" :"object",
                "properties" :{
                 "ru": {
                   "type": "string",
                   "description": "The name of the product in a foreign language",
                "example": "Яйцо куриное"
                 },
                 "ua": {
                   "type": "string",
                   "description": "The name of the product in a foreign language",
                "example": "Яйцe куряче"
                 }
                }
    },
    "_id": {
        "type": "number",
        "example": "5d51694802b2373622ff553b"
    },
    "categories": {
      "type": "array",
      "items": {
        "type":"string",
        "example": "яйце"
      }
    },
    "calories": {
        "type": "number",
        "example": "625"
    }
                }
             }
            },
            "DietRequest": {
             "type": "object",
             "properties": {
                "blood": {
                    "type": "number",
                    "description": "Blood type number",
                    "example": 2
                },
                "age": {
                    "type": "number",
                    "description": "User age",
                    "example": 27
                },
                "height": {
                    "type": "number",
                    "description": "User height",
                    "example": 181
                },
                "cWeight": {
                    "type": "number",
                    "description": "User cWeight",
                    "example": 95
                },
                "dWeight": {
                    "type": "number",
                    "description": "User dWeight",
                    "example": 86
                }
             }
            },
            "DietResponse": {
                "type": "object",
                "properties": {
                    "dailyCalories": {
                        "type": "number",
                        "description": "User calories for 1 day",
                        "example": 1871
                    },
                    "products" : {
                          "type": "array",
             "items": {
                "type": "object",
                "properties": {
                "title": {
                "type" :"object",
                "properties" :{
                 "ru": {
                   "type": "string",
                   "description": "The name of the product in a foreign language",
                "example": "Яйцо куриное"
                 },
                 "ua": {
                   "type": "string",
                   "description": "The name of the product in a foreign language",
                "example": "Яйцe куряче"
                 }
                }
    },
    "_id": {
        "type": "number",
        "example": "5d51694802b2373622ff553b"
    },
    "categories": {
      "type": "array",
      "items": {
        "type":"string",
        "example": "яйце"
      }
    },
    "calories": {
        "type": "number",
        "example": "625"
    }
                }
             }
                    }
                }
            }
        },
        "securitySchemes" : {
            "Bearer" : {
                "type": "http",
                "scheme" : "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}